var chartDom = document.getElementById('canvasA');
console.log(chartDom);
var myChartA = echarts.init(chartDom);
var option;

let gun = true;
let display = true;
let data2 = [];

function gettime(web_data) {
	let now = new Date();
	return {
		name: now.toString(),
		value: [
			[now.getHours() < 10 ? "0" + now.getHours() : now.getHours(),
				now.getMinutes() < 10 ? "0" + now.getMinutes() : now.getMinutes(),
				now.getSeconds() < 10 ? "0" + now.getSeconds() : now.getSeconds()
			].join(':'),
			web_data
		]
	}
}





option = {
	title: {
		show: true,
		text: "CPU占用率",
		textStyle: {
			color: "#fff",
			fontSize: 22
		},
		left: "40%",
		top: "2%"
	},
	//图标位置
	grid: {
		top: '8%',
		left: '10%',
		right: '12%',
		bottom: '6%',
		containLabel: true
	},
	toolbox: {
		show: true,
		itemSize: 20,
		itemColor: "#FFF",
		itemGap: 6,
		showTitle: false,
		right: "12%",
		top: '1.5%',
		iconStyle: {
			borderColor: "#fff",
			borderWidth: 2
		},
		feature: {
			magicType: {
				show: true,
				type: ['line', 'bar']
			},
			restore: {
				show: true
			},
			saveAsImage: {
				show: true,
				backgroundColor: "#7d8c81",
				//图片相当当前的分辨率乘于几（4k、5k即可啦）
				pixelRatio: 5
			},
			//自定义工具按钮
			myTool1: {//坐标轴是否自我滚动
				show: true,
				iconStyle: {
					borderColor: "#7effa3"
				},
				title: '停止/开始\r\n坐标滚动',
				// icon:'image://../img/gun.png',
				icon:'path://m43.58,116.95c6.09,-0.08 -5.8,-0.38 -7.9,-0.54c-17.61,-0.45 -32.23,-19.04 -30.33,-37.48c0.38,-18.48 17.13,-34.67 34.57,-32.81c4.54,-2.05 10.98,4.71 13.8,1.48c7.24,-13.55 14.25,-27.24 21.78,-40.61c6.41,-0.97 14.05,-1.72 20.29,0.12c2.88,4.82 -2.36,6.13 -5.63,5.39c-3.65,0 -7.3,0 -10.96,0c-2.64,5.12 -5.36,10.2 -8.06,15.28c15.34,0 30.69,0 46.03,0c0.34,-1.73 4.22,-5.46 0.78,-5.06c-6.24,-0.83 -2.34,-8.49 2.28,-6.31c6.48914,0.25308 13.20766,-0.67895 19.50206,0.70182c3.36238,7.16234 -6.35973,5.62579 -10.52726,5.7017c-3.08476,-1.06863 -3.72403,2.20441 -4.94539,4.44401c-4.95197,5.38381 -1.87401,11.05805 1.4542,16.30639c1.22079,2.38758 2.09047,5.70127 5.06114,3.47036c6.05792,-1.41288 12.66217,-1.46412 18.69013,0.18793c12.59601,3.97191 22.69543,16.36734 23.54097,30.40867c0.76298,8.62472 -0.97418,17.51478 -6.03216,24.47249c-5.86651,8.9185 -15.38712,13.80195 -25.40294,14.79258m-7.8526,0.08706c-9.13112,-2.48705 -17.5498,-8.27307 -22.43059,-17.00834c-3.19408,-4.36623 -3.60932,-11.12646 -5.30703,-15.50631c-4.47763,-0.06218 -8.95526,-0.12437 -13.4329,-0.18654c-9.06892,-15.48468 -17.06239,-31.67911 -25.81044,-47.37965c-1.70523,5.37502 -11.39945,12.68778 -6.04675,17.63558c13.43349,11.96359 15.22243,35.33174 3.73255,49.4181c-5.26554,6.26497 -12.56998,10.58229 -20.07868,13.02276m0.57674,-8.51889c14.48981,-3.34906 23.74909,-21.08171 18.73723,-35.87066c-1.54888,-4.81666 -5.8106,-12.51082 -9.57469,-12.58967c-4.0124,7.35283 -7.62202,14.96893 -12.01951,22.07538c-9.65648,1.80282 -0.80942,-10.67662 1.23383,-14.9172c2.19065,-5.1739 10.14576,-13.54354 0.1244,-13.41962c-7.03533,-0.74307 -14.51197,-0.02449 -20.20328,4.93178c-12.21388,8.57867 -14.52558,28.19993 -5.27609,40.02793c6.26165,8.61688 17.07483,12.28033 26.9781,9.76206l0.00001,-0.00001l0,0.00001zm101.37966,-0.00213c12.36755,-3.08417 21.26741,-16.57559 19.66657,-29.96559c-0.84666,-14.88069 -14.82871,-26.91539 -28.72931,-24.9153c-10.41634,-1.04634 -0.4439,9.10331 1.04499,14.03757c1.41646,5.23929 9.21941,11.67435 4.86304,16.78375c-9.77085,0.43445 -19.78127,-0.30509 -29.52529,0.7406c1.7501,13.71381 13.97787,25.05808 27.1725,24.00866c1.85169,-0.01603 3.7123,-0.1823 5.5075,-0.6897l-0.00001,0l0.00001,0.00001zm-39.916,-30.64793c1.17687,-10.73006 6.90731,-20.49047 15.26463,-26.59765c0.49376,-2.63208 -4.56668,-14.75507 -6.41961,-6.30321c-5.71936,11.03387 -11.46895,22.05294 -17.01306,33.18684c2.65595,0.06818 5.63324,0.56041 8.16804,-0.28597l0,-0.00001zm29.8543,-0.53218c-3.29693,-6.57841 -6.66706,-13.11734 -10.11307,-19.6091c-6.91281,3.86916 -11.46056,12.05733 -12.53558,20.23013c7.54791,-0.17077 15.22243,0.4186 22.6683,-0.42679l-0.01962,-0.19425l0,0l-0.00003,0.00001zm-32.33441,-23.72825c3.2516,-6.36969 6.56492,-12.70582 9.71609,-19.13207c-13.70226,-0.32603 -27.43561,-0.39745 -41.13324,0.06891c7.03571,12.83417 13.39208,26.16548 21.08494,38.55c3.72,-6.07 6.88,-13.06 10.33,-19.48l0,0l0,0z',
				onclick: function() {
					
					if(gun==true){	
						alert1("关闭了");
						this.model.option.icon='path://M237.056 441.8048a23.0912 23.0912 0 0 1-21.6064-15.0016L187.9552 353.28l-73.6768 27.3408a23.04 23.04 0 1 1-16.0768-43.1616L193.4848 302.08a22.9376 22.9376 0 0 1 29.5936 13.5168l35.5328 95.2832A23.04 23.04 0 0 1 245.0944 440.32a23.3984 23.3984 0 0 1-8.0384 1.4848zM871.1168 721.92a22.9888 22.9888 0 0 1-21.5552-15.0016l-35.4816-95.232a23.04 23.04 0 1 1 43.1616-16.0768l27.4944 73.6768 73.6768-27.4944a23.04 23.04 0 1 1 16.0768 43.1616l-95.2832 35.5328a21.9136 21.9136 0 0 1-8.0896 1.4336zM734.6688 223.1808a22.4768 22.4768 0 0 1-12.7488-3.8912A371.712 371.712 0 0 0 353.6896 194.56a23.04 23.04 0 1 1-20.48-41.3696A417.7408 417.7408 0 0 1 747.52 180.992a23.04 23.04 0 0 1-12.8 42.1888zM870.0416 723.5584a23.0912 23.0912 0 0 1-20.48-33.1776 372.9408 372.9408 0 0 0-60.3648-413.3888 23.04 23.04 0 1 1 33.9456-31.232A416.9728 416.9728 0 0 1 890.88 710.6048a23.0912 23.0912 0 0 1-20.8384 12.9536zM550.144 915.3536a416.0512 416.0512 0 0 1-230.4-69.2224 23.04 23.04 0 0 1 25.6-38.3488 371.8656 371.8656 0 0 0 367.4624 24.064 23.04 23.04 0 0 1 20.224 41.3696 416.3584 416.3584 0 0 1-182.8864 42.1376zM259.6864 787.6096a23.04 23.04 0 0 1-16.9472-7.4752 416.9728 416.9728 0 0 1-67.072-464.1792 23.04 23.04 0 1 1 41.4208 20.224A373.1456 373.1456 0 0 0 276.48 749.0048a23.0912 23.0912 0 0 1-16.9984 38.6048zM167.68 904.96a23.04 23.04 0 0 1-16.2816-39.3216l737.28-737.28a23.04 23.04 0 1 1 32.5632 32.5632l-737.28 737.28a22.9376 22.9376 0 0 1-16.2816 6.7584z';
						this.model.option.iconStyle.borderColor="#ffbc78";
						gun = false;
					}else{
						alert1("打开了");
						this.model.option.icon='path://path://m43.58,116.95c6.09,-0.08 -5.8,-0.38 -7.9,-0.54c-17.61,-0.45 -32.23,-19.04 -30.33,-37.48c0.38,-18.48 17.13,-34.67 34.57,-32.81c4.54,-2.05 10.98,4.71 13.8,1.48c7.24,-13.55 14.25,-27.24 21.78,-40.61c6.41,-0.97 14.05,-1.72 20.29,0.12c2.88,4.82 -2.36,6.13 -5.63,5.39c-3.65,0 -7.3,0 -10.96,0c-2.64,5.12 -5.36,10.2 -8.06,15.28c15.34,0 30.69,0 46.03,0c0.34,-1.73 4.22,-5.46 0.78,-5.06c-6.24,-0.83 -2.34,-8.49 2.28,-6.31c6.48914,0.25308 13.20766,-0.67895 19.50206,0.70182c3.36238,7.16234 -6.35973,5.62579 -10.52726,5.7017c-3.08476,-1.06863 -3.72403,2.20441 -4.94539,4.44401c-4.95197,5.38381 -1.87401,11.05805 1.4542,16.30639c1.22079,2.38758 2.09047,5.70127 5.06114,3.47036c6.05792,-1.41288 12.66217,-1.46412 18.69013,0.18793c12.59601,3.97191 22.69543,16.36734 23.54097,30.40867c0.76298,8.62472 -0.97418,17.51478 -6.03216,24.47249c-5.86651,8.9185 -15.38712,13.80195 -25.40294,14.79258m-7.8526,0.08706c-9.13112,-2.48705 -17.5498,-8.27307 -22.43059,-17.00834c-3.19408,-4.36623 -3.60932,-11.12646 -5.30703,-15.50631c-4.47763,-0.06218 -8.95526,-0.12437 -13.4329,-0.18654c-9.06892,-15.48468 -17.06239,-31.67911 -25.81044,-47.37965c-1.70523,5.37502 -11.39945,12.68778 -6.04675,17.63558c13.43349,11.96359 15.22243,35.33174 3.73255,49.4181c-5.26554,6.26497 -12.56998,10.58229 -20.07868,13.02276m0.57674,-8.51889c14.48981,-3.34906 23.74909,-21.08171 18.73723,-35.87066c-1.54888,-4.81666 -5.8106,-12.51082 -9.57469,-12.58967c-4.0124,7.35283 -7.62202,14.96893 -12.01951,22.07538c-9.65648,1.80282 -0.80942,-10.67662 1.23383,-14.9172c2.19065,-5.1739 10.14576,-13.54354 0.1244,-13.41962c-7.03533,-0.74307 -14.51197,-0.02449 -20.20328,4.93178c-12.21388,8.57867 -14.52558,28.19993 -5.27609,40.02793c6.26165,8.61688 17.07483,12.28033 26.9781,9.76206l0.00001,-0.00001l0,0.00001zm101.37966,-0.00213c12.36755,-3.08417 21.26741,-16.57559 19.66657,-29.96559c-0.84666,-14.88069 -14.82871,-26.91539 -28.72931,-24.9153c-10.41634,-1.04634 -0.4439,9.10331 1.04499,14.03757c1.41646,5.23929 9.21941,11.67435 4.86304,16.78375c-9.77085,0.43445 -19.78127,-0.30509 -29.52529,0.7406c1.7501,13.71381 13.97787,25.05808 27.1725,24.00866c1.85169,-0.01603 3.7123,-0.1823 5.5075,-0.6897l-0.00001,0l0.00001,0.00001zm-39.916,-30.64793c1.17687,-10.73006 6.90731,-20.49047 15.26463,-26.59765c0.49376,-2.63208 -4.56668,-14.75507 -6.41961,-6.30321c-5.71936,11.03387 -11.46895,22.05294 -17.01306,33.18684c2.65595,0.06818 5.63324,0.56041 8.16804,-0.28597l0,-0.00001zm29.8543,-0.53218c-3.29693,-6.57841 -6.66706,-13.11734 -10.11307,-19.6091c-6.91281,3.86916 -11.46056,12.05733 -12.53558,20.23013c7.54791,-0.17077 15.22243,0.4186 22.6683,-0.42679l-0.01962,-0.19425l0,0l-0.00003,0.00001zm-32.33441,-23.72825c3.2516,-6.36969 6.56492,-12.70582 9.71609,-19.13207c-13.70226,-0.32603 -27.43561,-0.39745 -41.13324,0.06891c7.03571,12.83417 13.39208,26.16548 21.08494,38.55c3.72,-6.07 6.88,-13.06 10.33,-19.48l0,0l0,0z';
						this.model.option.iconStyle.borderColor="#7effa3";
						gun = true;
					}
					
				}
			},
			myTool2: {//是否显示坐标轴
				show: true,
				iconStyle: {
					borderColor: "#7effa3"
				},
				title: '显示/隐藏\r\n坐标轴',
				icon: 'path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891',
				onclick: function() {
					if(display==true){
						alert1("隐藏中..");
						this.model.option.iconStyle.borderColor="#ffbc78";
						// this.ecModel.option.yAxis.show = false;
						// this.ecModel.option.xAxis.show = false;
						display = false;
					}else{
						alert1("显示中..");
						this.model.option.iconStyle.borderColor="#7effa3";
						// this.ecModel.option.yAxis.show = true;
						// this.ecModel.option.xAxis.show = true;
						display = true;
					}
				}
			}
		},
		tooltip: { // 和 option.tooltip 的配置项相同
			show: true,
			formatter: function(param) {
				//这个按钮不显示，不然保存时候有提示框
				if (param.title == '保存为图片') {
					return '';
				}
				return param.title; // 自定义的 DOM 结构
			},

			// backgroundColor: '#222',
			textStyle: {
				fontSize: 12,
			},
			position: function(point, params, dom, rect, size) {
				// 固定在顶部
				return [point[0] - 30, '6%'];
			}
		}
	},
	//鼠标悬浮显示
	tooltip: {
		trigger: 'axis',
		formatter: function(params) {
			params = params[0];
			return (params.value[0] + "\r\n占用率:" + params.value[1] + "%");
		},
		renderMode: "richText",
		// renderMode:"html",
		axisPointer: {
			type: "cross",
			crossStyle: {
				color: "#e2e2e2"
			},
			animation: true
		}
	},

	xAxis: {
		show: true,
		type: 'category',
		splitLine: {
			show: false
		},
		axisLabel: {
			color: "#ffffff",
			rotate: -35, //30度显示
			formatter: function(value) { //x轴的字改为竖版显
				var str = value.split(":");
				if (str[2] % 2 == 0) {
					return "{a|" + value + "}";
				}
				return value;
			},
			rich: {
				a: {
					color: '#ffffff6e',
					fontSize: 11,
				}
			},
			fontSize: 13,
		},
	},
	yAxis: {
		show: true,
		type: 'value',
		interval: 4,
		min: 0,
		max: 100,
		boundaryGap: [0, '100%'],
		splitLine: {
			show: true,
			lineStyle: {
				color: "rgba(145, 145, 145, 1.0)"
			}
		},
		axisLabel: {
			color: "#ffffff",
			fontSize: 15,
			showMinLabel: false, //不显示最小值处刻度线值
			// showMaxLabel: false //不显示最大值处刻度线值
		}
	},
	//滚轮缩放
	dataZoom: [{
			type: 'inside',
			show: true,
			start: 0,
			end: 100,
			zoomOnMouseWheel: 'ctrl', //按住crrl键滚动放大
			xAxisIndex: [0]
		},
		{
			type: 'inside',
			show: true,
			start: 0,
			end: 100,
			zoomOnMouseWheel: 'alt',
			yAxisIndex: [0]
		},
	],
	series: [{
		type: 'line',
		color: "#00ffc8",
		showSymbol: false,
		// data: data2
	}]
};

// 就
// setInterval(function() {
// 	if (data2.length > 14) {
// 		data2.shift();
// 	}
// 	data2.push(gettime());
// 	console.log(data2);
// 	console.log("---");
// 	myChartA.setOption({
// 		xAxis: {},
// 		series: [{
// 			data: data2
// 		}]
// 	});
// }, 1000);

myChartA.setOption(option);

//用户点击还原按钮的时候
myChartA.on('restore', function() {
	alert1("还原啦~");
	gun = true;
	display = true;
});


// 做动态，图表(包括数据、坐标)
// 数据格式如下：value[x轴，y轴]
// let abc = [{
// 	name: "哈哈哈哈",
// 	value: [1, 100]
// }, {
// 	name: "哈哈哈",
// 	value: [3, 100]
// }]


// 轴里不要写data（可以min、max），写在series里就行
// 注意，轴的类型不是time对增加有效果，但对与删除没有效果。
// 但可以在setIntervalmy用 ChartA.setOption(option);
// 但下面这个没有效果：（我猜是局部重绘）
// 	myChartA.setOption({
// 		series: [{
// 			data: abc
// 		}]
// 	});
// 因此，你还可以这样：(按需重绘)
// myChartA.setOption({
// 	xAxis: {
// 	},
// 	series: [{
// 		data: data2
// 	}]
// });

// 结合setInterval对abc数组进行操作，并重绘
